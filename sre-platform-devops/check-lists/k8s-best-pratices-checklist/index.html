<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="My technical knowledge collection is here."><meta name=author content=learnk8s.io><link href=https://ivankatliarchuk.github.io/sre-platform-devops/check-lists/k8s-best-pratices-checklist/ rel=canonical><link href=../infrastructure-forensic-readiness/ rel=prev><link href=../lunch-coordination/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.16"><title>kubernetes best practices checklist - IvanK public knowledge base</title><link rel=stylesheet href=../../../assets/stylesheets/main.26e3688c.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ecc896b0.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#kubernetes-best-practices-checklist class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="IvanK public knowledge base" class="md-header__button md-logo" aria-label="IvanK public knowledge base" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> IvanK public knowledge base </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> kubernetes best practices checklist </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ivankatliarchuk/knowledge-base title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../blogs/blogs.web-to-follow/ class=md-tabs__link> Blogs&Articles </a> </li> <li class=md-tabs__item> <a href=../../../education/ class=md-tabs__link> Education </a> </li> <li class=md-tabs__item> <a href=../../../interview/ class=md-tabs__link> Interview </a> </li> <li class=md-tabs__item> <a href=../../../leadership/ class=md-tabs__link> Leadership </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> SRE-Platform-DevOps </a> </li> <li class=md-tabs__item> <a href=../../../tools/ class=md-tabs__link> Tools </a> </li> <li class=md-tabs__item> <a href=../../../travel/ class=md-tabs__link> Properties&Travel </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="IvanK public knowledge base" class="md-nav__button md-logo" aria-label="IvanK public knowledge base" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> IvanK public knowledge base </label> <div class=md-nav__source> <a href=https://github.com/ivankatliarchuk/knowledge-base title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_1> <div class="md-nav__link md-nav__link--index "> <a href=../../..>Home</a> <label for=__nav_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quicklinks/ class=md-nav__link> Quick Links </a> </li> <li class=md-nav__item> <a href=../../../awesome-pages/ class=md-nav__link> Awesome Pages </a> </li> <li class=md-nav__item> <a href=../../../tags/ class=md-nav__link> Tags </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Blogs&Articles <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Blogs&Articles </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> Blogs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blogs/blogs.web-to-follow/ class=md-nav__link> blogs to follow </a> </li> <li class=md-nav__item> <a href=../../../blogs/coding/ class=md-nav__link> coding blogs </a> </li> <li class=md-nav__item> <a href=../../../blogs/how-to/ class=md-nav__link> how to </a> </li> <li class=md-nav__item> <a href=../../../blogs/kubernetes/ class=md-nav__link> kubernetes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> Education <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Education </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../education/ >Education</a> <label for=__nav_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Education </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../education/android/ class=md-nav__link> android cofing </a> </li> <li class=md-nav__item> <a href=../../../education/certifications/ class=md-nav__link> cyber security certifications </a> </li> <li class=md-nav__item> <a href=../../../education/courses.tutorials/ class=md-nav__link> courses and tutorials </a> </li> <li class=md-nav__item> <a href=../../../education/markdown-tricks/ class=md-nav__link> markdown tricks </a> </li> <li class=md-nav__item> <a href=../../../education/mentorship/ class=md-nav__link> mentorship </a> </li> <li class=md-nav__item> <a href=../../../education/resources/ class=md-nav__link> education resources & lists </a> </li> <li class=md-nav__item> <a href=../../../education/talks-and-conferences/ class=md-nav__link> talks and conferences </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../workshops/ >Workshops</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Workshops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../workshops/ecs/ class=md-nav__link> cloud general </a> </li> <li class=md-nav__item> <a href=../../../workshops/k8s-security/ class=md-nav__link> k8s security </a> </li> <li class=md-nav__item> <a href=../../../workshops/k8s/ class=md-nav__link> k8s general </a> </li> <li class=md-nav__item> <a href=../../../workshops/pentest/ class=md-nav__link> pentest </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Interview <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../interview/ >Interview</a> <label for=__nav_4_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../interview/code-review/ class=md-nav__link> code-review </a> </li> <li class=md-nav__item> <a href=../../../interview/hypotetical/ class=md-nav__link> hypothetical questions </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> Leadership <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Leadership </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../leadership/ >Leadership</a> <label for=__nav_5_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> Leadership </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leadership/phrases/ class=md-nav__link> phrases </a> </li> <li class=md-nav__item> <a href=../../../leadership/questions/ class=md-nav__link> questions </a> </li> <li class=md-nav__item> <a href=../../../leadership/words/ class=md-nav__link> Words </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> Job Descriptions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Job Descriptions </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_2_1> <label class=md-nav__link for=__nav_5_2_1 id=__nav_5_2_1_label tabindex=0> Job description <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2_1> <span class="md-nav__icon md-icon"></span> Job description </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leadership/job-description/platform-engineer/ class=md-nav__link> job advert </a> </li> <li class=md-nav__item> <a href=../../../leadership/job-description/take-home-tasks/ class=md-nav__link> take home tasks </a> </li> <li class=md-nav__item> <a href=../../../leadership/job-description/tech-competency/ class=md-nav__link> job </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> Product <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Product </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../leadership/product/ >Product</a> <label for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3_1> <span class="md-nav__icon md-icon"></span> Product </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leadership/product/agile.practices/ class=md-nav__link> agile practices </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> Career <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Career </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_4_1> <label class=md-nav__link for=__nav_5_4_1 id=__nav_5_4_1_label tabindex=0> Career <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4_1> <span class="md-nav__icon md-icon"></span> Career </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../leadership/career/21-management-tips/ class=md-nav__link> 21 people management tips </a> </li> <li class=md-nav__item> <a href=../../../leadership/career/career-framerowrks/ class=md-nav__link> Career Frameworks </a> </li> <li class=md-nav__item> <a href=../../../leadership/career/engineering-management/ class=md-nav__link> enginnering management </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> SRE-Platform-DevOps <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> SRE-Platform-DevOps </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_1> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Sre platform devops</a> <label for=__nav_6_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_1> <span class="md-nav__icon md-icon"></span> Sre platform devops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture-bp/ class=md-nav__link> arcthitecture & best practices </a> </li> <li class=md-nav__item> <a href=../../awesome/ class=md-nav__link> awesome pages </a> </li> <li class=md-nav__item> <a href=../../companies/ class=md-nav__link> devops companies </a> </li> <li class=md-nav__item> <a href=../../devops-cheatsheets/ class=md-nav__link> cheat sheets </a> </li> <li class=md-nav__item> <a href=../../distaster-recovery/ class=md-nav__link> Disaster Recovery </a> </li> <li class=md-nav__item> <a href=../../how-to/ class=md-nav__link> how to </a> </li> <li class=md-nav__item> <a href=../../monitoring/ class=md-nav__link> monitoring </a> </li> <li class=md-nav__item> <a href=../../ops-lessons/ class=md-nav__link> operation lessons </a> </li> <li class=md-nav__item> <a href=../../os/ class=md-nav__link> os </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_2_1> <div class="md-nav__link md-nav__link--index "> <a href=../../notes/ >Notes</a> <label for=__nav_6_2_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2_1> <span class="md-nav__icon md-icon"></span> Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../notes/google/ class=md-nav__link> google notes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> Run Books <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Run Books </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../run-books/ >Run books</a> <label for=__nav_6_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3_1> <span class="md-nav__icon md-icon"></span> Run books </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../run-books/declaring-incident/ class=md-nav__link> declaring incident (CMOC) </a> </li> <li class=md-nav__item> <a href=../../run-books/engineer-on-call/ class=md-nav__link> engineer on call (EOC) </a> </li> <li class=md-nav__item> <a href=../../run-books/gitlab-oncall-run-book/ class=md-nav__link> gitlab on call run book </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4 checked> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> Readiness Lists <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=true> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> Readiness Lists </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4_1 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Check lists</a> <label for=__nav_6_4_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_4_1_label aria-expanded=true> <label class=md-nav__title for=__nav_6_4_1> <span class="md-nav__icon md-icon"></span> Check lists </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../android-app-checklist/ class=md-nav__link> android app launch checklist </a> </li> <li class=md-nav__item> <a href=../app-migration-process/ class=md-nav__link> application migration process </a> </li> <li class=md-nav__item> <a href=../app-readiness-checklist/ class=md-nav__link> application readiness checklist </a> </li> <li class=md-nav__item> <a href=../assessing-migration-readiness/ class=md-nav__link> assessing migration readiness </a> </li> <li class=md-nav__item> <a href=../incident-response-phases/ class=md-nav__link> incident readiness phases </a> </li> <li class=md-nav__item> <a href=../incident-response-plan/ class=md-nav__link> incident readiness plan </a> </li> <li class=md-nav__item> <a href=../incident-response-post/ class=md-nav__link> post-incident review checklist </a> </li> <li class=md-nav__item> <a href=../infrastructure-forensic-readiness/ class=md-nav__link> aws cloud readiness checklist </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> kubernetes best practices checklist <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> kubernetes best practices checklist </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-application-development class=md-nav__link> 1. Application development </a> <nav class=md-nav aria-label="1. Application development"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#containers-have-readiness-probes class=md-nav__link> Containers have Readiness probes </a> </li> <li class=md-nav__item> <a href=#containers-crash-when-theres-a-fatal-error class=md-nav__link> Containers crash when there's a fatal error </a> </li> <li class=md-nav__item> <a href=#configure-a-passive-liveness-probe class=md-nav__link> Configure a passive Liveness probe </a> </li> <li class=md-nav__item> <a href=#liveness-probes-values-arent-the-same-as-the-readiness class=md-nav__link> Liveness probes values aren't the same as the Readiness </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#apps-independent class=md-nav__link> Apps Independent </a> <nav class=md-nav aria-label="Apps Independent"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-readiness-probes-are-independent class=md-nav__link> The Readiness probes are independent </a> </li> <li class=md-nav__item> <a href=#the-app-retries-connecting-to-dependent-services class=md-nav__link> The app retries connecting to dependent services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#graceful-shutdown class=md-nav__link> Graceful Shutdown </a> <nav class=md-nav aria-label="Graceful Shutdown"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-app-doesnt-shut-down-on-sigterm-but-it-gracefully-terminates-connections class=md-nav__link> The app doesn't shut down on SIGTERM, but it gracefully terminates connections </a> </li> <li class=md-nav__item> <a href=#the-app-still-processes-incoming-requests-in-the-grace-period class=md-nav__link> The app still processes incoming requests in the grace period </a> </li> <li class=md-nav__item> <a href=#the-cmd-in-the-dockerfile-forwards-the-sigterm-to-the-process class=md-nav__link> The CMD in the Dockerfile forwards the SIGTERM to the process </a> </li> <li class=md-nav__item> <a href=#close-all-idle-keep-alive-sockets class=md-nav__link> Close all idle keep-alive sockets </a> </li> <li class=md-nav__item> <a href=#run-more-than-one-replica-for-your-deployment class=md-nav__link> Run more than one replica for your Deployment </a> </li> <li class=md-nav__item> <a href=#avoid-pods-being-placed-into-a-single-node class=md-nav__link> Avoid Pods being placed into a single node </a> </li> <li class=md-nav__item> <a href=#set-pod-disruption-budgets class=md-nav__link> Set Pod disruption budgets </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-utilization class=md-nav__link> Resource Utilization </a> <nav class=md-nav aria-label="Resource Utilization"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-memory-limits-and-requests-for-all-containers class=md-nav__link> Set memory limits and requests for all containers </a> </li> <li class=md-nav__item> <a href=#set-cpu-request-to-1-cpu-or-below class=md-nav__link> Set CPU request to 1 CPU or below </a> </li> <li class=md-nav__item> <a href=#disable-cpu-limits-unless-you-have-a-good-use-case class=md-nav__link> Disable CPU limits — unless you have a good use case </a> </li> <li class=md-nav__item> <a href=#the-namespace-has-a-limitrange class=md-nav__link> The namespace has a LimitRange </a> </li> <li class=md-nav__item> <a href=#set-an-appropriate-quality-of-service-qos-for-pods class=md-nav__link> Set an appropriate Quality of Service (QoS) for Pods </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tagging-resources class=md-nav__link> Tagging Resources </a> <nav class=md-nav aria-label="Tagging Resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#resources-have-technical-labels-defined class=md-nav__link> Resources have technical labels defined </a> </li> <li class=md-nav__item> <a href=#resources-have-business-labels-defined class=md-nav__link> Resources have business labels defined </a> </li> <li class=md-nav__item> <a href=#resources-have-security-labels-defined class=md-nav__link> Resources have security labels defined </a> </li> <li class=md-nav__item> <a href=#the-application-logs-to-stdout-and-stderr class=md-nav__link> The application logs to stdout and stderr </a> </li> <li class=md-nav__item> <a href=#avoid-sidecars-for-logging-if-you-can class=md-nav__link> Avoid sidecars for logging (if you can) </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#scaling class=md-nav__link> Scaling </a> <nav class=md-nav aria-label=Scaling> <ul class=md-nav__list> <li class=md-nav__item> <a href=#containers-do-not-store-any-state-in-their-local-filesystem class=md-nav__link> Containers do not store any state in their local filesystem </a> </li> <li class=md-nav__item> <a href=#use-the-horizontal-pod-autoscaler-for-apps-with-variable-usage-patterns class=md-nav__link> Use the Horizontal Pod Autoscaler for apps with variable usage patterns </a> </li> <li class=md-nav__item> <a href=#dont-use-the-vertical-pod-autoscaler-while-its-still-in-beta class=md-nav__link> Don't use the Vertical Pod Autoscaler while it's still in beta </a> </li> <li class=md-nav__item> <a href=#use-the-cluster-autoscaler-if-you-have-highly-varying-workloads class=md-nav__link> Use the Cluster Autoscaler if you have highly varying workloads </a> </li> <li class=md-nav__item> <a href=#externalise-all-configuration class=md-nav__link> Externalise all configuration </a> </li> <li class=md-nav__item> <a href=#mount-secrets-as-volumes-not-enviroment-variables class=md-nav__link> Mount Secrets as volumes, not enviroment variables </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-governance class=md-nav__link> 2. Governance </a> <nav class=md-nav aria-label="2. Governance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#namespaces-have-limitrange class=md-nav__link> Namespaces have LimitRange </a> </li> <li class=md-nav__item> <a href=#namespaces-have-resourcequotas class=md-nav__link> Namespaces have ResourceQuotas </a> </li> <li class=md-nav__item> <a href=#enable-pod-security-policies class=md-nav__link> Enable Pod Security Policies </a> </li> <li class=md-nav__item> <a href=#disable-privileged-containers class=md-nav__link> Disable privileged containers </a> </li> <li class=md-nav__item> <a href=#use-a-read-only-filesystem-in-containers class=md-nav__link> Use a read-only filesystem in containers </a> </li> <li class=md-nav__item> <a href=#prevent-containers-from-running-as-root class=md-nav__link> Prevent containers from running as root </a> </li> <li class=md-nav__item> <a href=#limit-capabilities class=md-nav__link> Limit capabilities </a> </li> <li class=md-nav__item> <a href=#prevent-privilege-escalation class=md-nav__link> Prevent privilege escalation </a> </li> <li class=md-nav__item> <a href=#enable-network-policies class=md-nav__link> Enable network policies </a> </li> <li class=md-nav__item> <a href=#theres-a-conservative-networkpolicy-in-every-namespace class=md-nav__link> There's a conservative NetworkPolicy in every namespace </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#role-based-access-control-rbac-policies class=md-nav__link> Role-Based Access Control (RBAC) policies </a> <nav class=md-nav aria-label="Role-Based Access Control (RBAC) policies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#disable-auto-mounting-of-the-default-serviceaccount class=md-nav__link> Disable auto-mounting of the default ServiceAccount </a> </li> <li class=md-nav__item> <a href=#rbac-policies-are-set-to-the-least-amount-of-privileges-necessary class=md-nav__link> RBAC policies are set to the least amount of privileges necessary </a> </li> <li class=md-nav__item> <a href=#rbac-policies-are-granular-and-not-shared class=md-nav__link> RBAC policies are granular and not shared </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-policies class=md-nav__link> Custom Policies </a> <nav class=md-nav aria-label="Custom Policies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#allow-deploying-containers-only-from-known-registries class=md-nav__link> Allow deploying containers only from known registries </a> </li> <li class=md-nav__item> <a href=#enforce-uniqueness-in-ingress-hostnames class=md-nav__link> Enforce uniqueness in Ingress hostnames </a> </li> <li class=md-nav__item> <a href=#only-use-approved-domain-names-in-the-ingress-hostnames class=md-nav__link> Only use approved domain names in the Ingress hostnames </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-cluster-configuration class=md-nav__link> 3. Cluster configuration </a> <nav class=md-nav aria-label="3. Cluster configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-cluster-passes-the-cis-benchmark class=md-nav__link> The cluster passes the CIS benchmark </a> </li> <li class=md-nav__item> <a href=#disable-metadata-cloud-providers-metada-api class=md-nav__link> Disable metadata cloud providers metada API </a> </li> <li class=md-nav__item> <a href=#restrict-access-to-alpha-or-beta-features class=md-nav__link> Restrict access to alpha or beta features </a> </li> <li class=md-nav__item> <a href=#use-openid-oidc-tokens-as-a-user-authentication-strategy class=md-nav__link> Use OpenID (OIDC) tokens as a user authentication strategy </a> </li> <li class=md-nav__item> <a href=#serviceaccount-tokens-are-for-applications-and-controllers-only class=md-nav__link> ServiceAccount tokens are for applications and controllers only </a> </li> <li class=md-nav__item> <a href=#theres-a-retention-and-archival-strategy-for-logs class=md-nav__link> There's a retention and archival strategy for logs </a> </li> <li class=md-nav__item> <a href=#logs-are-collected-from-nodes-control-plane-auditing class=md-nav__link> Logs are collected from Nodes, Control Plane, Auditing </a> </li> <li class=md-nav__item> <a href=#prefer-a-daemon-on-each-node-to-collect-the-logs-instead-of-sidecars class=md-nav__link> Prefer a daemon on each node to collect the logs instead of sidecars </a> </li> <li class=md-nav__item> <a href=#provision-a-log-aggregation-tool class=md-nav__link> Provision a log aggregation tool </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../lunch-coordination/ class=md-nav__link> launch coordination checklist </a> </li> <li class=md-nav__item> <a href=../monitoring-list/ class=md-nav__link> monitorin readiness lists </a> </li> <li class=md-nav__item> <a href=../operations-metrics/ class=md-nav__link> operations readiness metrics lists </a> </li> <li class=md-nav__item> <a href=../oreily-list/ class=md-nav__link> oreilly readiness checklist </a> </li> <li class=md-nav__item> <a href=../release-checklist/ class=md-nav__link> release checklist </a> </li> <li class=md-nav__item> <a href=../technical-diagrams-checklist/ class=md-nav__link> application documentation checklist </a> </li> <li class=md-nav__item> <a href=../vault-checklist/ class=md-nav__link> vault checklist </a> </li> <li class=md-nav__item> <a href=../vulnerability.list/ class=md-nav__link> vulnerability list </a> </li> <li class=md-nav__item> <a href=../website-scan-checklist/ class=md-nav__link> website scan checklist </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> Architecture Notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Architecture Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_5_1> <label class=md-nav__link for=__nav_6_5_1 id=__nav_6_5_1_label tabindex=0> Architecture notes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5_1> <span class="md-nav__icon md-icon"></span> Architecture notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture-notes/audits/ class=md-nav__link> audits documentation </a> </li> <li class=md-nav__item> <a href=../../architecture-notes/design-data/ class=md-nav__link> system data design </a> </li> <li class=md-nav__item> <a href=../../architecture-notes/documentation/ class=md-nav__link> documentation architecture </a> </li> <li class=md-nav__item> <a href=../../architecture-notes/microservice-lifecycle/ class=md-nav__link> high level system design </a> </li> <li class=md-nav__item> <a href=../../architecture-notes/references-architecture/ class=md-nav__link> reference architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_6> <div class="md-nav__link md-nav__link--index "> <a href=../../infrastructure/ >Infrastructure</a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6_6> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7 id=__nav_6_7_label tabindex=0> Docs Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> Docs Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_7_1> <label class=md-nav__link for=__nav_6_7_1 id=__nav_6_7_1_label tabindex=0> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_6_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7_1> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/incident-state-document/ class=md-nav__link> Incident state document </a> </li> <li class=md-nav__item> <a href=../../examples/info/ class=md-nav__link> Postmortem Practices </a> </li> <li class=md-nav__item> <a href=../../examples/postmortem/ class=md-nav__link> Incident state document </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../tools/ >Tools</a> <label for=__nav_7_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/agile.tools/ class=md-nav__link> agile&diagrams </a> </li> <li class=md-nav__item> <a href=../../../tools/audit/ class=md-nav__link> audit tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/authentication/ class=md-nav__link> authentication </a> </li> <li class=md-nav__item> <a href=../../../tools/blueprints/ class=md-nav__link> project blueprints </a> </li> <li class=md-nav__item> <a href=../../../tools/cicd/ class=md-nav__link> cicd tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/coding/ class=md-nav__link> coding tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/company.tools/ class=md-nav__link> company tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/database/ class=md-nav__link> database tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/github/ class=md-nav__link> github </a> </li> <li class=md-nav__item> <a href=../../../tools/infrastructure/ class=md-nav__link> infrastructure tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/metrics/ class=md-nav__link> metrics tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/monitoring/ class=md-nav__link> monitoring tools </a> </li> <li class=md-nav__item> <a href=../../../tools/networking/ class=md-nav__link> networking </a> </li> <li class=md-nav__item> <a href=../../../tools/office/ class=md-nav__link> day&office planners </a> </li> <li class=md-nav__item> <a href=../../../tools/os/ class=md-nav__link> install os </a> </li> <li class=md-nav__item> <a href=../../../tools/performance/ class=md-nav__link> performance tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/resources/ class=md-nav__link> blogging resources </a> </li> <li class=md-nav__item> <a href=../../../tools/secrets-management/ class=md-nav__link> secrets management </a> </li> <li class=md-nav__item> <a href=../../../tools/sre/ class=md-nav__link> sre </a> </li> <li class=md-nav__item> <a href=../../../tools/terraform%26terragrunt/ class=md-nav__link> terraform </a> </li> <li class=md-nav__item> <a href=../../../tools/unix/ class=md-nav__link> unix&linux tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/website.tools/ class=md-nav__link> website tooling </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> AWS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_2_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../tools/aws/ >Aws</a> <label for=__nav_7_2_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2_1> <span class="md-nav__icon md-icon"></span> Aws </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/aws/clouds/ class=md-nav__link> resource management </a> </li> <li class=md-nav__item> <a href=../../../tools/aws/eks/ class=md-nav__link> eks tooling </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> Cyber-Sec <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> Cyber-Sec </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../tools/cyber-sec/ >Cyber sec</a> <label for=__nav_7_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3_1> <span class="md-nav__icon md-icon"></span> Cyber sec </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/cyber-sec/offsec/ class=md-nav__link> offsec tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/cyber-sec/pentest/ class=md-nav__link> pentest tooling </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4 id=__nav_7_4_label tabindex=0> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_4_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../tools/kubernetes/ >Kubernetes</a> <label for=__nav_7_4_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_4_1> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tools/kubernetes/helm-charts/ class=md-nav__link> helm tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/kubernetes/k8s-operators/ class=md-nav__link> k8s operators and controllers </a> </li> <li class=md-nav__item> <a href=../../../tools/kubernetes/k8s-tests/ class=md-nav__link> k8s tooling </a> </li> <li class=md-nav__item> <a href=../../../tools/kubernetes/k8s/ class=md-nav__link> k8s tooling </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <div class="md-nav__link md-nav__link--index "> <a href=../../../travel/ >Properties&Travel</a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Properties&Travel </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <nav class=md-tags> <a href=../../../tags/#checklist class=md-tag>checklist</a> <a href=../../../tags/#k8s class=md-tag>k8s</a> <a href=../../../tags/#kubernetes class=md-tag>kubernetes</a> <a href=../../../tags/#best-practices class=md-tag>best practices</a> <a href=../../../tags/#production class=md-tag>production</a> </nav> <h1 id=kubernetes-best-practices-checklist>kubernetes best practices checklist<a class=headerlink href=#kubernetes-best-practices-checklist title="Permanent link">#</a></h1> <h2 id=1-application-development>1. Application development<a class=headerlink href=#1-application-development title="Permanent link">#</a></h2> <p><strong>The readiness probe determines when a container can receive traffic.</strong></p> <p>The kubelet executes the checks and decides if the app can receive traffic or not.</p> <p><strong>The liveness probe determines when a container should be restarted.</strong></p> <p>The kubelet executes the check and decides if the container should be restarted.</p> <p><strong>Resources:</strong></p> <ul> <li>The official Kubernetes documentation offers some practical advice on how to <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ >configure Liveness, Readiness and Startup Probes</a>.</li> <li> <p><a href=https://srcco.de/posts/kubernetes-liveness-probes-are-dangerous.html>Liveness probes are dangerous</a> has some information on how to set (or not) dependencies in your readiness probes.</p> </li> <li> <h3 id=containers-have-readiness-probes>Containers have Readiness probes<a class=headerlink href=#containers-have-readiness-probes title="Permanent link">#</a></h3> </li> </ul> <blockquote> <p>Please note that there's no default value for readiness and liveness.</p> </blockquote> <p>If you don't set the readiness probe, the kubelet assumes that the app is ready to receive traffic as soon as the container starts.</p> <p>If the container takes 2 minutes to start, all the requests to it will fail for those 2 minutes.</p> <ul> <li> <h3 id=containers-crash-when-theres-a-fatal-error>Containers crash when there's a fatal error<a class=headerlink href=#containers-crash-when-theres-a-fatal-error title="Permanent link">#</a></h3> </li> </ul> <p>If the application reaches an unrecoverable error, <a href=https://blog.colinbreck.com/kubernetes-liveness-and-readiness-probes-revisited-how-to-avoid-shooting-yourself-in-the-other-foot/#letitcrash>you should let it crash</a>.</p> <p>Examples of such unrecoverable errors are:</p> <ul> <li>an uncaught exception</li> <li>a typo in the code (for dynamic languages)</li> <li>unable to load a header or dependency</li> </ul> <p>Please note that you should not signal a failing Liveness probe.</p> <p>Instead, you should immediately exit the process and let the kubelet restart the container.</p> <ul> <li> <h3 id=configure-a-passive-liveness-probe>Configure a passive Liveness probe<a class=headerlink href=#configure-a-passive-liveness-probe title="Permanent link">#</a></h3> </li> </ul> <p>The Liveness probe is designed to restart your container when it's stuck.</p> <p>Consider the following scenario: if your application is processing an infinite loop, there's no way to exit or ask for help.</p> <p>When the process is consuming 100% CPU, it won't have time to reply to the (other) Readiness probe checks, and it will be eventually removed from the Service.</p> <p>However, the Pod is still registered as an active replica for the current Deployment.</p> <p>If you don't have a Liveness probe, it stays <em>Running</em> but detached from the Service.</p> <p>In other words, not only is the process not serving any requests, but it is also consuming resources.</p> <p><em>What should you do?</em></p> <ol> <li>Expose an endpoint from your app</li> <li>The endpoint always replies with a success response</li> <li>Consume the endpoint from the Liveness probe</li> </ol> <p>Please note that you should not use the Liveness probe to handle fatal errors in your app and request Kubernetes to restart the app.</p> <p>Instead, you should let the app crash.</p> <p>The Liveness probe should be used as a recovery mechanism only in case the process is not responsive.</p> <ul> <li> <h3 id=liveness-probes-values-arent-the-same-as-the-readiness>Liveness probes values aren't the same as the Readiness<a class=headerlink href=#liveness-probes-values-arent-the-same-as-the-readiness title="Permanent link">#</a></h3> </li> </ul> <p>When Liveness and Readiness probes are pointing to the same endpoint, the effects of the probes are combined.</p> <p>When the app signals that it's not ready or live, the kubelet detaches the container from the Service and delete it <strong>at the same time</strong>.</p> <p>You might notice dropping connections because the container does not have enough time to drain the current connections or process the incoming ones.</p> <p>You can dig deeper in the following <a href=https://freecontent.manning.com/handling-client-requests-properly-with-kubernetes/ >article that discussed graceful shutdown</a>.</p> <h2 id=apps-independent><strong>Apps Independent</strong><a class=headerlink href=#apps-independent title="Permanent link">#</a></h2> <p>If the app connects to a database, you might think that returning a failing readiness probe until the database is <em>ready</em> is a good idea — it is not.</p> <p>Consider the following scenario: you have one front-end app that depends on a backend API.</p> <p>If the API is flaky (e.g. it's unavailable from time to time due to a bug), the readiness probe fails, and the dependent readiness in the front-end app fail as well.</p> <p>And you have downtime.</p> <p>More in general, <strong>a failure in a dependency downstream could propagate to all apps upstream</strong> and eventually, bring down your front-end facing layer as well.</p> <ul> <li> <h3 id=the-readiness-probes-are-independent>The Readiness probes are independent<a class=headerlink href=#the-readiness-probes-are-independent title="Permanent link">#</a></h3> </li> </ul> <p>The readiness probe doesn't include dependencies to services such as:</p> <ul> <li>databases</li> <li>database migrations</li> <li>APIs</li> <li>third party services</li> </ul> <p>You can <a href=https://blog.colinbreck.com/kubernetes-liveness-and-readiness-probes-how-to-avoid-shooting-yourself-in-the-foot/#shootingyourselfinthefootwithreadinessprobes>explore what happens when there're dependencies in the readiness probes in this essay</a>.</p> <ul> <li> <h3 id=the-app-retries-connecting-to-dependent-services>The app retries connecting to dependent services<a class=headerlink href=#the-app-retries-connecting-to-dependent-services title="Permanent link">#</a></h3> </li> </ul> <p>When the app starts, it shouldn't crash because a dependency such as a database isn't ready.</p> <p>Instead, the app should keep retrying to connect to the database until it succeeds.</p> <p>Kubernetes expects that application components can be started in any order.</p> <p>When you make sure that your app can reconnect to a dependency such as a database you know you can deliver a more robust and resilient service.</p> <h2 id=graceful-shutdown><strong>Graceful Shutdown</strong><a class=headerlink href=#graceful-shutdown title="Permanent link">#</a></h2> <p>Instead, you should wait for the existing connection to drain and stop processing new ones.</p> <p>Please notice that, when a Pod is terminated, the endpoints for that Pod are removed from the Service.</p> <p>However, it might take some time before component such as kube-proxy or the Ingress controller is notified of the change.</p> <p>You can find a detail explanation on how graceful shutdown works in <a href=https://freecontent.manning.com/handling-client-requests-properly-with-kubernetes/ >handling client requests correctly with Kubernetes</a>.</p> <p>The correct graceful shutdown sequence is:</p> <ol> <li>upon receiving SIGTERM</li> <li>the server stops accepting new connections</li> <li>completes all active requests</li> <li>then immediately kills all keepalive connections and</li> <li>the process exits</li> </ol> <p>You can <a href=https://github.com/mikkeloscar/kube-sigterm-test>test that your app gracefully shuts down with this tool: kube-sigterm-test</a>.</p> <ul> <li> <h3 id=the-app-doesnt-shut-down-on-sigterm-but-it-gracefully-terminates-connections>The app doesn't shut down on SIGTERM, but it gracefully terminates connections<a class=headerlink href=#the-app-doesnt-shut-down-on-sigterm-but-it-gracefully-terminates-connections title="Permanent link">#</a></h3> </li> </ul> <p>It might take some time before a component such as kube-proxy or the Ingress controller is notified of the endpoint changes.</p> <p>Hence, traffic might still flow to the Pod despite it being marked as terminated.</p> <p>The app should stop accepting new requests on all remaining connections, and close these once the outgoing queue is drained.</p> <p>If you need a refresher on how endpoints are propagated in your cluster, <a href=https://freecontent.manning.com/handling-client-requests-properly-with-kubernetes/ >read this article on how to handle client requests properly</a>.</p> <ul> <li> <h3 id=the-app-still-processes-incoming-requests-in-the-grace-period>The app still processes incoming requests in the grace period<a class=headerlink href=#the-app-still-processes-incoming-requests-in-the-grace-period title="Permanent link">#</a></h3> </li> </ul> <p>You might want to consider using the container lifecycle events such as <a href=https://kubernetes.io/docs/tasks/configure-pod-container/attach-handler-lifecycle-event/#define-poststart-and-prestop-handlers>the preStop handler</a> to customize what happened before a Pod is deleted.</p> <ul> <li> <h3 id=the-cmd-in-the-dockerfile-forwards-the-sigterm-to-the-process>The CMD in the <code>Dockerfile</code> forwards the SIGTERM to the process<a class=headerlink href=#the-cmd-in-the-dockerfile-forwards-the-sigterm-to-the-process title="Permanent link">#</a></h3> </li> </ul> <p>You can be notified when the Pod is about to be terminated by capturing the SIGTERM signal in your app.</p> <p>You should also pay attention to <a href=https://pracucci.com/graceful-shutdown-of-kubernetes-pods.html>forwarding the signal to the right process in your container</a>.</p> <ul> <li> <h3 id=close-all-idle-keep-alive-sockets>Close all idle keep-alive sockets<a class=headerlink href=#close-all-idle-keep-alive-sockets title="Permanent link">#</a></h3> </li> </ul> <p>If the calling app is not closing the TCP connection (e.g. using TCP keep-alive or a connection pool) it will connect to one Pod and not use the other Pods in that Service.</p> <p><em>But what happens when a Pod is deleted?</em></p> <p>Ideally, the request should go to another Pod.</p> <p>However, the calling app has a long-lived connection open with the Pod that is about to be terminated, and it will keep using it.</p> <p>On the other hand, you shouldn't abruptly terminate long-lived connections.</p> <p>Instead, you should terminate them before shutting down the app.</p> <p>You can read about keep-alive connections on this article about <a href=http://dillonbuchanan.com/programming/gracefully-shutting-down-a-nodejs-http-server/ >gracefully shutting down a Nodejs HTTP server</a>.</p> <ul> <li>a hardware failure of the physical machine</li> <li>cloud provider or hypervisor failure</li> <li>a kernel panic</li> </ul> <p>Pods deployed in those nodes are lost too.</p> <p>Also, there are other scenarios where Pods could be deleted:</p> <ul> <li>directly deleting a pod (accident)</li> <li>draining a node</li> <li>removing a pod from a node to permit another Pod to fit on that node</li> </ul> <p>Any of the above scenarios could affect the availability of your app and potentially cause downtime.</p> <p>You should protect from a scenario where all of your Pods are made unavailable, and you aren't able to serve live traffic.</p> <ul> <li> <h3 id=run-more-than-one-replica-for-your-deployment>Run more than one replica for your Deployment<a class=headerlink href=#run-more-than-one-replica-for-your-deployment title="Permanent link">#</a></h3> </li> </ul> <p>Never run a single Pod individually.</p> <p>Instead consider deploying your Pod as part of a Deployment, DaemonSet, ReplicaSet or StatefulSet.</p> <p><a href=https://cloudmark.github.io/Node-Management-In-GKE/#replicas>Running more than one instance of your Pods guarantees that deleting a single Pod won't cause downtime</a>.</p> <ul> <li> <h3 id=avoid-pods-being-placed-into-a-single-node>Avoid Pods being placed into a single node<a class=headerlink href=#avoid-pods-being-placed-into-a-single-node title="Permanent link">#</a></h3> </li> </ul> <p><strong>Even if you run several copies of your Pods, there are no guarantees that losing a node won't take down your service.</strong></p> <p>Consider the following scenario: you have 11 replicas on a single cluster node.</p> <p>If the node is made unavailable, the 11 replicas are lost, and you have downtime.</p> <p><a href=https://cloudmark.github.io/Node-Management-In-GKE/#pod-anti-affinity-rules>You should apply anti-affinity rules to your Deployments so that Pods are spread in all the nodes of your cluster</a>.</p> <p>The <a href=https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#inter-pod-affinity-and-anti-affinity>inter-pod affinity and anti-affinity</a> documentation describe how you can you could change your Pod to be located (or not) in the same node.</p> <ul> <li> <h3 id=set-pod-disruption-budgets>Set Pod disruption budgets<a class=headerlink href=#set-pod-disruption-budgets title="Permanent link">#</a></h3> </li> </ul> <p>When a node is drained, all the Pods on that node are deleted and rescheduled.</p> <p><em>But what if you are under heavy load and you can't lose more than 50% of your Pods?</em></p> <p>The drain event could affect your availability.</p> <p>To protect the Deployments from unexpected events that could take down several Pods at the same time, you can define Pod Disruption Budget.</p> <p>Imagine saying: <em>"Kubernetes, please make sure that there are always at least 5 Pods running for my app".</em></p> <p>Kubernetes will prevent the drain event if the final state results in less than 5 Pods for that Deployment.</p> <p>The official documentation is an excellent place to start to understand <a href=https://kubernetes.io/docs/concepts/workloads/pods/disruptions/ >Pod Disruption Budgets</a>.</p> <ul> <li> <h2 id=resource-utilization>Resource Utilization<a class=headerlink href=#resource-utilization title="Permanent link">#</a></h2> </li> </ul> <p>Docker containers are the blocks; servers are the boards, and the scheduler is the player.</p> <p>To maximise the efficiency of the scheduler, you should share with Kubernetes details such as resource utilisation, workload priorities and overheads.</p> <ul> <li> <h3 id=set-memory-limits-and-requests-for-all-containers>Set memory limits and requests for all containers<a class=headerlink href=#set-memory-limits-and-requests-for-all-containers title="Permanent link">#</a></h3> </li> </ul> <p>Resource limits are used to constrain how much CPU and memory your containers can utilise and are set using the resources property of a <code>containerSpec</code>.</p> <p>The scheduler uses those as one of metrics to decide which node is best suited for the current Pod.</p> <p>A container without a memory limit has memory utilisation of zero — according to the scheduler.</p> <p>An unlimited number of Pods if schedulable on any nodes leading to resource overcommitment and potential node (and kubelet) crashes.</p> <p>The same applies to CPU limits.</p> <p><em>But should you always set limits and requests for memory and CPU?</em></p> <p>Yes and no.</p> <p>If your process goes over the memory limit, the process is terminated.</p> <p>Since CPU is a compressible resource, if your container goes over the limit, the process is throttled.</p> <p>Even if it could have used some of the CPU that was available at that moment.</p> <p>**<a href=https://www.reddit.com/r/kubernetes/comments/cmp7jj/multithreading_in_a_container_with_limited/ew52fcj/ >CPU limits are hard.</a>**s</p> <p>If you wish to dig deeper into CPU and memory limits you should check out the following articles:</p> <ul> <li><a href=https://medium.com/@betz.mark/understanding-resource-limits-in-kubernetes-memory-6b41e9a955f9>Understanding resource limits in kubernetes: memory</a></li> <li><a href=https://medium.com/@betz.mark/understanding-resource-limits-in-kubernetes-cpu-time-9eff74d3161b>Understanding resource limits in kubernetes: cpu time</a></li> </ul> <blockquote> <p>Please note that if you are not sure what should be the <em>right</em> CPU or memory limit, you can use the <a href=https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler>Vertical Pod Autoscaler</a> in Kubernetes with the recommendation mode turned on. The autoscaler profiles your app and recommends limits for it.</p> </blockquote> <ul> <li> <h3 id=set-cpu-request-to-1-cpu-or-below>Set CPU request to 1 CPU or below<a class=headerlink href=#set-cpu-request-to-1-cpu-or-below title="Permanent link">#</a></h3> </li> </ul> <p>Unless you have computational intensive jobs, <a href="https://www.youtube.com/watch?v=xjpHggHKm78">it is recommended to set the request to 1 CPU or below</a>.</p> <ul> <li> <h3 id=disable-cpu-limits-unless-you-have-a-good-use-case>Disable CPU limits — unless you have a good use case<a class=headerlink href=#disable-cpu-limits-unless-you-have-a-good-use-case title="Permanent link">#</a></h3> </li> </ul> <p>CPU is measured as CPU timeunits per timeunit.</p> <p><code>cpu: 1</code> means 1 CPU second per second.</p> <p>If you have 1 thread, you can't consume more than 1 CPU second per second.</p> <p>If you have 2 threads, you can consume 1 CPU second in 0.5 seconds.</p> <p>8 threads can consume 1 CPU second in 0.125 seconds.</p> <p>After that, your process is throttled.</p> <p>If you're not sure about what's the best settings for your app, it's better not to set the CPU limits.</p> <p>If you wish to learn more, <a href=https://medium.com/@betz.mark/understanding-resource-limits-in-kubernetes-cpu-time-9eff74d3161b>this article digs deeper in CPU requests and limits</a>.</p> <ul> <li> <h3 id=the-namespace-has-a-limitrange>The namespace has a LimitRange<a class=headerlink href=#the-namespace-has-a-limitrange title="Permanent link">#</a></h3> </li> </ul> <p>If you think you might forget to set memory and CPU limits, you should consider using a LimitRange object to define the standard size for a container deployed in the current namespace.</p> <p><a href=https://kubernetes.io/docs/concepts/policy/limit-range/ >The official documentation about LimitRange</a> is an excellent place to start.</p> <ul> <li> <h3 id=set-an-appropriate-quality-of-service-qos-for-pods>Set an appropriate Quality of Service (QoS) for Pods<a class=headerlink href=#set-an-appropriate-quality-of-service-qos-for-pods title="Permanent link">#</a></h3> </li> </ul> <p>When a node goes into an overcommitted state (i.e. using too many resources) Kubernetes tries to evict some of the Pod in that Node.</p> <p>Kubernetes ranks and evicts the Pods according to a well-defined logic.</p> <p>You can find more about <a href=https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/ >configuring the quality of service for your Pods</a> on the official documentation.</p> <h2 id=tagging-resources><strong>Tagging Resources</strong><a class=headerlink href=#tagging-resources title="Permanent link">#</a></h2> <p>A label is a key-value pair without any pre-defined meaning.</p> <p>They can be applied to all resources in your cluster from Pods to Service, Ingress manifests, Endpoints, etc.</p> <p>You can use labels to categorize resources by purpose, owner, environment, or other criteria.</p> <p>So you could choose a label to tag a Pod in an environment such as "this pod is running in production" or "the payment team owns that Deployment".</p> <p>You can also omit labels altogether.</p> <p>However, you might want to consider using labels to cover the following categories:</p> <ul> <li>technical labels such as the environment</li> <li>labels for automation</li> <li>label related to your business such as cost-centre allocation</li> <li> <p>label related to security such as compliance requirements</p> </li> <li> <h3 id=resources-have-technical-labels-defined>Resources have technical labels defined<a class=headerlink href=#resources-have-technical-labels-defined title="Permanent link">#</a></h3> </li> </ul> <p>You could tag your Pods with:</p> <ul> <li><code>name</code>, the name of the application such "User API"</li> <li><code>instance</code>, a unique name identifying the instance of an application (you could use the container image tag)</li> <li><code>version</code>, the current version of the appl (an incremental counter)</li> <li><code>component</code>, the component within the architecture such as "API" or "database"</li> <li><code>part-of</code>, the name of a higher-level application this one is part of such as "payment gateway"</li> <li><code>managed-by</code>, the tool being used to manage the operation of an application such as "kubectl" or "Helm"</li> </ul> <p>Here's an example on how you could use such labels in a Deployment:</p> <div class=highlight><pre><span></span><code>`deployment.yaml`

```yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment
  labels:
    app.kubernetes.io/name: user-api
    app.kubernetes.io/instance: user-api-5fa65d2
    app.kubernetes.io/version: &quot;42&quot;
    app.kubernetes.io/component: api
    app.kubernetes.io/part-of: payment-gateway
    app.kubernetes.io/managed-by: kubectl
spec:
  replicas: 3
  selector:
    matchLabels:
      application: my-app
  template:
    metadata:
      labels:
        app.kubernetes.io/name: user-api
        app.kubernetes.io/instance: user-api-5fa65d2
        app.kubernetes.io/version: &quot;42&quot;
        app.kubernetes.io/component: api
        app.kubernetes.io/part-of: payment-gateway
    spec:
      containers:
      - name: app
        image: myapp
```

Those labels are [recommended by the official documentation](https://kubernetes.io/docs/concepts/overview/working-with-objects/common-labels/).

&gt; Please not that you&#39;re recommended to tag **all resources**.
</code></pre></div> <ul> <li> <h3 id=resources-have-business-labels-defined>Resources have business labels defined<a class=headerlink href=#resources-have-business-labels-defined title="Permanent link">#</a></h3> <p>You could tag your Pods with:</p> <ul> <li><code>owner</code>, used to identify who is responsible for the resource</li> <li><code>project</code>, used to determine the project that the resource belongs to</li> <li><code>business-unit</code>, used to identify the cost centre or business unit associated with a resource; typically for cost allocation and tracking</li> </ul> <p>Here's an example on how you could use such labels in a Deployment:</p> <p><code>deployment.yaml</code></p> <div class=highlight><pre><span></span><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment
  labels:
    owner: payment-team
    project: fraud-detection
    business-unit: &quot;80432&quot;
spec:
  replicas: 3
  selector:
    matchLabels:
      application: my-app
  template:
    metadata:
      labels:
        owner: payment-team
        project: fraud-detection
        business-unit: &quot;80432&quot;
    spec:
      containers:
      - name: app
        image: myapp
</code></pre></div> <p>You can explore labels and <a href=https://aws.amazon.com/answers/account-management/aws-tagging-strategies/ >tagging for resources on the AWS tagging strategy page</a>.</p> <p>The article isn't specific to Kubernetes but explores some of the most common strategies for tagging resources.</p> <blockquote> <p>Please not that you're recommended to tag <strong>all resources</strong>.</p> </blockquote> </li> <li> <h3 id=resources-have-security-labels-defined>Resources have security labels defined<a class=headerlink href=#resources-have-security-labels-defined title="Permanent link">#</a></h3> <p>You could tag your Pods with:</p> <ul> <li><code>confidentiality</code>, an identifier for the specific data-confidentiality level a resource supports</li> <li><code>compliance</code>, an identifier for workloads designed to adhere to specific compliance requirements</li> </ul> <p>Here's an example on how you could use such labels in a Deployment:</p> <p>deployment.yaml</p> <div class=highlight><pre><span></span><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment
  labels:
    confidentiality: official
    compliance: pci
spec:
  replicas: 3
  selector:
    matchLabels:
      application: my-app
  template:
    metadata:
      labels:
        confidentiality: official
        compliance: pci
    spec:
      containers:
      - name: app
        image: myapp
</code></pre></div> <p>You can explore label and <a href=https://aws.amazon.com/answers/account-management/aws-tagging-strategies/ >tagging for resources on the AWS tagging strategy page</a>.</p> <p>The article isn't specific to Kubernetes but explores some of the most common strategies for tagging resources.</p> <blockquote> <p>Please not that you're recommended to tag <strong>all resources</strong>.</p> </blockquote> </li> </ul> <p>The logs are particularly useful for debugging problems and monitoring app activity.</p> <ul> <li> <h3 id=the-application-logs-to-stdout-and-stderr>The application logs to <code>stdout</code> and <code>stderr</code><a class=headerlink href=#the-application-logs-to-stdout-and-stderr title="Permanent link">#</a></h3> </li> </ul> <p>There are two logging strategies: <em>passive</em> and <em>active</em>.</p> <p>Apps that use passive logging are unaware of the logging infrastructure and log messages to standard outputs.</p> <p>This best practice is part of <a href=https://12factor.net/logs>the twelve-factor app</a>.</p> <p>In active logging, the app makes network connections to intermediate aggregators, sends data to third-party logging services, or writes directly to a database or index.</p> <p>Active logging is considered an antipattern, and it should be avoided.</p> <ul> <li> <h3 id=avoid-sidecars-for-logging-if-you-can>Avoid sidecars for logging (if you can)<a class=headerlink href=#avoid-sidecars-for-logging-if-you-can title="Permanent link">#</a></h3> </li> </ul> <p>If you wish to <a href=https://rclayton.silvrback.com/container-services-logging-with-docker#effective-logging-infrastructure>apply log transformations to an application with a non-standard log event model</a>, you may want to use a sidecar container.</p> <p>With a sidecar container, you can normalise the log entries before they are shipped elsewhere.</p> <p>For example, you may want to transform Apache logs into Logstash JSON format before shipping it to the logging infrastructure.</p> <p>However, if you have control over the application, you could output the right format, to begin with.</p> <p>You could save on running an extra container for each Pod in your cluster.</p> <h2 id=scaling><strong>Scaling</strong><a class=headerlink href=#scaling title="Permanent link">#</a></h2> <p>Containers have a local filesystem and you might be tempted to use it for persisting data.</p> <p>However, storing persistent data in a container's local filesystem prevents the encompassing Pod from being scaled horizontally (that is, by adding or removing replicas of the Pod).</p> <p>This is because, by using the local filesystem, each container maintains its own "state", which means that the states of Pod replicas may diverge over time. This results in inconsistent behaviour from the user's point of view (for example, a specific piece of user information is available when the request hits one Pod, but not when the request hits another Pod).</p> <p>Instead, any persistent information should be saved at a central place outside the Pods. For example, in a PersistentVolume in the cluster, or even better in some storage service outside the cluster.</p> <ul> <li> <h3 id=containers-do-not-store-any-state-in-their-local-filesystem>Containers do not store any state in their local filesystem<a class=headerlink href=#containers-do-not-store-any-state-in-their-local-filesystem title="Permanent link">#</a></h3> </li> </ul> <p>Containers have a local filesystem and you might be tempted to use it for persisting data.</p> <p>However, storing persistent data in a container's local filesystem prevents the encompassing Pod from being scaled horizontally (that is, by adding or removing replicas of the Pod).</p> <p>This is because, by using the local filesystem, each container maintains its own "state", which means that the states of Pod replicas may diverge over time. This results in inconsistent behaviour from the user's point of view (for example, a specific piece of user information is available when the request hits one Pod, but not when the request hits another Pod).</p> <p>Instead, any persistent information should be saved at a central place outside the Pods. For example, in a PersistentVolume in the cluster, or even better in some storage service outside the cluster.</p> <ul> <li> <h3 id=use-the-horizontal-pod-autoscaler-for-apps-with-variable-usage-patterns>Use the Horizontal Pod Autoscaler for apps with variable usage patterns<a class=headerlink href=#use-the-horizontal-pod-autoscaler-for-apps-with-variable-usage-patterns title="Permanent link">#</a></h3> </li> </ul> <p>The <a href=https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/ >Horizontal Pod Autoscaler (HPA)</a> is a built-in Kubernetes feature that monitors your application and automatically adds or removes Pod replicas based on the current usage.</p> <p>Configuring the HPA allows your app to stay available and responsive under any traffic conditions, including unexpected spikes.</p> <p>To configure the HPA to autoscale your app, you have to create a <a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.16/#horizontalpodautoscaler-v1-autoscaling>HorizontalPodAutoscaler</a> resource, which defines what metric to monitor for your app.</p> <p>The HPA can monitor either built-in resource metric (CPU and memory usage of your Pods) or custom metrics. In the case of custom metrics, you are also responsible for collecting and exposing these metrics, which you can do, for example, with <a href=https://prometheus.io/ >Prometheus</a> and the <a href=https://github.com/DirectXMan12/k8s-prometheus-adapter>Prometheus Adapter</a>.</p> <ul> <li> <h3 id=dont-use-the-vertical-pod-autoscaler-while-its-still-in-beta>Don't use the Vertical Pod Autoscaler while it's still in beta<a class=headerlink href=#dont-use-the-vertical-pod-autoscaler-while-its-still-in-beta title="Permanent link">#</a></h3> </li> </ul> <p>Analogous to the <a href=https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/ >Horizontal Pod Autoscaler (HPA)</a>, there exists the <a href=https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler>Vertical Pod Autoscaler (VPA)</a>.</p> <p>The VPA can automatically adapt the resource requests and limits of your Pods so that when a Pod needs more resources, it can get them (increasing/decreasing the resources of a single Pod is called <em>vertical scaling</em>, as opposed to <em>horizontal scaling</em>, which means increasing/decreasing the number of replicas of a Pod).</p> <p>This can be useful for scaling applications that can't be scaled horizontally.</p> <p>However, the VPA is curently in beta and it has <a href=https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler#limitations-of-beta-version>some known limitations</a> (for example, scaling a Pod by changing its resource requirements, requires the Pod to be killed and restarted).</p> <p>Given these limitations, and the fact that most applications on Kubernetes can be scaled horizontally anyway, it is recommended to not use the VPA in production (at least until there is a stable version).</p> <ul> <li> <h3 id=use-the-cluster-autoscaler-if-you-have-highly-varying-workloads>Use the Cluster Autoscaler if you have highly varying workloads<a class=headerlink href=#use-the-cluster-autoscaler-if-you-have-highly-varying-workloads title="Permanent link">#</a></h3> </li> </ul> <p>The <a href=https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler>Cluster Autoscaler</a> is another type of "autoscaler" (besides the <a href=https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/ >Horizontal Pod Autoscaler</a> and <a href=https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler>Vertical Pod Autoscaler</a>).</p> <p>The Cluster Autoscaler can automatically scale the size of your cluster by adding or removing worker nodes.</p> <p>A scale-up operation happens when a Pod fails to be scheduled because of insufficient resources on the existing worker nodes. In this case, the Cluster Autoscaler creates a new worker node, so that the Pod can be scheduled. Similarly, when the utilisation of the existing worker nodes is low, the Cluster Autoscaler can scale down by evicting all the workloads from one of the worker nodes and removing it.</p> <p>Using the Cluster Autoscaler makes sense for highly variable workloads, for example, when the number of Pods may multiply in a short time, and then go back to the previous value. In such scenarios, the Cluster Autoscaler allows you to meet the demand spikes without wasting resources by overprovisioning worker nodes.</p> <p>However, if your workloads do not vary so much, it may not be worth to set up the Cluster Autoscaler, as it may never be triggered. If your workloads grow slowly and monotonically, it may be enough to monitor the utilisations of your existing worker nodes and add an additional worker node manually when they reach a critical value.</p> <p>Configuration and secrets</p> <p>Configuration should be maintained outside the application code.</p> <p>This has several benefits. First, changing the configuration does not require recompiling the application. Second, the configuration can be updated when the application is running. Third, the same code can be used in different environments.</p> <p>In Kubernetes, the configuration can be saved in ConfigMaps, which can then be mounted into containers as volumes are passed in as environment variables.</p> <p>Save only non-sensitive configuration in ConfigMaps. For sensitive information (such as credentials), use the Secret resource.</p> <ul> <li> <h3 id=externalise-all-configuration>Externalise all configuration<a class=headerlink href=#externalise-all-configuration title="Permanent link">#</a></h3> </li> </ul> <p>Configuration should be maintained outside the application code.</p> <p>This has several benefits. First, changing the configuration does not require recompiling the application. Second, the configuration can be updated when the application is running. Third, the same code can be used in different environments.</p> <p>In Kubernetes, the configuration can be saved in ConfigMaps, which can then be mounted into containers as volumes are passed in as environment variables.</p> <p>Save only non-sensitive configuration in ConfigMaps. For sensitive information (such as credentials), use the Secret resource.</p> <ul> <li> <h3 id=mount-secrets-as-volumes-not-enviroment-variables>Mount Secrets as volumes, not enviroment variables<a class=headerlink href=#mount-secrets-as-volumes-not-enviroment-variables title="Permanent link">#</a></h3> </li> </ul> <p>The content of Secret resources should be mounted into containers as volumes rather than passed in as environment variables.</p> <p>This is to prevent that the secret values appear in the command that was used to start the container, which may be inspected by individuals that shouldn't have access to the secret values.</p> <h2 id=2-governance>2. Governance<a class=headerlink href=#2-governance title="Permanent link">#</a></h2> <p>You shouldn't allow your user to use more resources than what you agreed in advance.</p> <p>Cluster administrators can set constraints to limit the number of objects or amount of computing resources that are used in your project with quotas and limit ranges.</p> <p>You should check out the official documentation if you need a refresher on <a href=https://kubernetes.io/docs/concepts/policy/limit-range/ >limit ranges</a></p> <ul> <li> <h3 id=namespaces-have-limitrange>Namespaces have LimitRange<a class=headerlink href=#namespaces-have-limitrange title="Permanent link">#</a></h3> </li> </ul> <p>Containers without limits can lead to resource contention with other containers and unoptimized consumption of computing resources.</p> <p>Kubernetes has two features for constraining resource utilisation: ResourceQuota and LimitRange.</p> <p>With the LimitRange object, you can define default values for resource requests and limits for individual containers inside namespaces.</p> <p>Any container created inside that namespace, without request and limit values explicitly specified, is assigned the default values.</p> <p>You should check out the official documentation if you need a refresher on <a href=https://kubernetes.io/docs/concepts/policy/resource-quotas/ >resource quotas</a>.</p> <ul> <li> <h3 id=namespaces-have-resourcequotas>Namespaces have ResourceQuotas<a class=headerlink href=#namespaces-have-resourcequotas title="Permanent link">#</a></h3> </li> </ul> <p>With ResourceQuotas, you can limit the total resource consumption of all containers inside a Namespace.</p> <p>Defining a resource quota for a namespace limits the total amount of CPU, memory or storage resources that can be consumed by all containers belonging to that namespace.</p> <p>You can also set quotas for other Kubernetes objects such as the number of Pods in the current namespace.</p> <p>If you're thinking that someone could exploit your cluster and create 20000 ConfigMaps, using the LimitRange is how you can prevent that.</p> <ul> <li>the container being compromised</li> <li>the container using resources on the node that are not allowed such as process, network or file system</li> </ul> <p>More in general, you should restrict what the Pod can do to the bare minimum.</p> <ul> <li> <h3 id=enable-pod-security-policies>Enable Pod Security Policies<a class=headerlink href=#enable-pod-security-policies title="Permanent link">#</a></h3> </li> </ul> <p>For example, you can use Kubernetes Pod security policies for restricting:</p> <ul> <li>Access the host process or network namespace</li> <li>Running privileged containers</li> <li>The user that the container is running as</li> <li>Access the host filesystem</li> <li>Linux capabilities, Seccomp or SELinux profiles</li> </ul> <p>Choosing the right policy depends on the nature of your cluster.</p> <p>The following article explains some of the <a href=https://resources.whitesourcesoftware.com/blog-whitesource/kubernetes-pod-security-policy>Kubernetes Pod Security Policy best practices</a></p> <ul> <li> <h3 id=disable-privileged-containers>Disable privileged containers<a class=headerlink href=#disable-privileged-containers title="Permanent link">#</a></h3> </li> </ul> <p>In a Pod, containers can run in "privileged" mode and have almost unrestricted access to resources on the host system.</p> <p>While there are specific use cases where this level of access is necessary, in general, it's a security risk to let your containers do this.</p> <p>Valid uses cases for privileged Pods include using hardware on the node such as GPUs.</p> <p>You can <a href=https://kubernetes.io/docs/tasks/configure-pod-container/security-context/ >learn more about security contexts and privileges containers from this article</a>.</p> <ul> <li> <h3 id=use-a-read-only-filesystem-in-containers>Use a read-only filesystem in containers<a class=headerlink href=#use-a-read-only-filesystem-in-containers title="Permanent link">#</a></h3> </li> </ul> <p>Running a read-only file system in your containers forces your containers to be immutable.</p> <p>Not only does this mitigate some old (and risky) practices such as hot patching, but also helps you prevent the risks of malicious processes storing or manipulating data inside a container.</p> <p>Running containers with a read-only file system might sound straightforward, but it might come with some complexity.</p> <p><em>What if you need to write logs or store files in a temporary folder?</em></p> <p>You can learn about the trade-offs in this article on <a href=https://medium.com/@axbaretto/running-docker-containers-securely-in-production-98b8104ef68>running containers securely in production</a>.</p> <ul> <li> <h3 id=prevent-containers-from-running-as-root>Prevent containers from running as root<a class=headerlink href=#prevent-containers-from-running-as-root title="Permanent link">#</a></h3> </li> </ul> <p>A process running in a container is no different from any other process on the host, except it has a small piece of metadata that declares that it's in a container.</p> <p>Hence, root in a container is the same root (uid 0) as on the host machine.</p> <p>If a user manages to break out of an application running as root in a container, they may be able to gain access to the host with the same root user.</p> <p>Configuring containers to use unprivileged users, is the best way to prevent privilege escalation attacks.</p> <p>If you wish to learn more, the follow <a href=https://medium.com/@mccode/processes-in-containers-should-not-run-as-root-2feae3f0df3b>article offers some detailed explanation examples of what happens when you run your containers as root</a>.</p> <ul> <li> <h3 id=limit-capabilities>Limit capabilities<a class=headerlink href=#limit-capabilities title="Permanent link">#</a></h3> </li> </ul> <p>Linux capabilities give processes the ability to do some of the many privileged operations only the root user can do by default.</p> <p>For example, <code>CAP_CHOWN</code> allows a process to "make arbitrary changes to file UIDs and GIDs".</p> <p>Even if your process doesn't run as <code>root</code>, there's a chance that a process could use those root-like features by escalating privileges.</p> <p>In other words, you should enable only the capabilities that you need if you don't want to be compromised.</p> <p><em>But what capabilities should be enabled and why?</em></p> <p>The following two articles dive into the theory and practical best-practices about capabilities in the Linux Kernel:</p> <ul> <li><a href=https://blog.container-solutions.com/linux-capabilities-why-they-exist-and-how-they-work>Linux Capabilities: Why They Exist and How They Work</a></li> <li> <p><a href=https://blog.container-solutions.com/linux-capabilities-in-practice>Linux Capabilities In Practice</a></p> </li> <li> <h3 id=prevent-privilege-escalation>Prevent privilege escalation<a class=headerlink href=#prevent-privilege-escalation title="Permanent link">#</a></h3> <p>You should run your container with privilege escalation turned off to prevent escalating privileges using <code>setuid</code> or <code>setgid</code> binaries.</p> </li> <li> <p><strong>containers can talk to any other container in the network</strong>, and there's no translation of addresses in the process — i.e. no NAT is involved</p> </li> <li><strong>nodes in the cluster can talk to any other container in the network and vice-versa</strong>. Even in this case, there's no translation of addresses — i.e. no NAT</li> <li><strong>a container's IP address is always the same</strong>, independently if seen from another container or itself.</li> </ul> <p>The first rule isn't helping if you plan to segregate your cluster in smaller chunks and have isolation between namespaces.</p> <p><em>Imagine if a user in your cluster were able to use any other service in the cluster.</em></p> <p>Now, <em>imagine if a malicious user in the cluster were to obtain access to the cluster</em> — they could make requests to the whole cluster.</p> <p>To fix that, you can define how Pods should be allowed to communicate in the current namespace and cross-namespace using Network Policies.</p> <ul> <li> <h3 id=enable-network-policies>Enable network policies<a class=headerlink href=#enable-network-policies title="Permanent link">#</a></h3> <p>Kubernetes network policies specify the access permissions for groups of pods, much like security groups in the cloud are used to control access to VM instances.</p> <p>In other words, it creates firewalls between pods running on a Kubernetes cluster.</p> <p>If you are not familiar with Network Policies, you can read <a href=https://ahmet.im/blog/kubernetes-network-policy/ >Securing Kubernetes Cluster Networking</a>.</p> </li> <li> <h3 id=theres-a-conservative-networkpolicy-in-every-namespace>There's a conservative NetworkPolicy in every namespace<a class=headerlink href=#theres-a-conservative-networkpolicy-in-every-namespace title="Permanent link">#</a></h3> </li> </ul> <h2 id=role-based-access-control-rbac-policies>Role-Based Access Control (RBAC) policies<a class=headerlink href=#role-based-access-control-rbac-policies title="Permanent link">#</a></h2> <p>It's common practice to give away the least permission needed, <em>but what is practical and how do you quantify the least privilege?</em></p> <p>Fine-grained policies provide greater security but require more effort to administrate.</p> <p>Broader grants can give unnecessary API access to service accounts but are easier to controls.</p> <p><em>Should you create a single policy per namespace and share it?</em></p> <p><em>Or perhaps it's better to have them on a more granular basis?</em></p> <p>There's no one-size-fits-all approach, and you should judge your requirements case by case.</p> <p><em>But where do you start?</em></p> <p>If you start with a Role with empty rules, you can add all the resources that you need one by one and still be sure that you're not giving away too much.</p> <ul> <li> <h3 id=disable-auto-mounting-of-the-default-serviceaccount>Disable auto-mounting of the default ServiceAccount<a class=headerlink href=#disable-auto-mounting-of-the-default-serviceaccount title="Permanent link">#</a></h3> </li> </ul> <p>Please note that <a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server>the default ServiceAccount is automatically mounted into the file system of all Pods</a>.</p> <p>You might want to disable that and provide more granular policies.</p> <ul> <li> <h3 id=rbac-policies-are-set-to-the-least-amount-of-privileges-necessary>RBAC policies are set to the least amount of privileges necessary<a class=headerlink href=#rbac-policies-are-set-to-the-least-amount-of-privileges-necessary title="Permanent link">#</a></h3> </li> </ul> <p>It's challenging to find good advice on how to set up your RBAC rules. In 3 realistic approaches to Kubernetes RBAC, you can find three practical scenarios and practical advice on how to get started.</p> <ul> <li> <h3 id=rbac-policies-are-granular-and-not-shared>RBAC policies are granular and not shared<a class=headerlink href=#rbac-policies-are-granular-and-not-shared title="Permanent link">#</a></h3> </li> </ul> <p>Zalando has a concise policy to define roles and ServiceAccounts.</p> <p>First, they describe their requirements:</p> <ul> <li>Users should be able to deploy, but they shouldn't be allowed to read Secrets for example</li> <li>Admins should get full access to all resources</li> <li>Applications should not gain write access to the Kubernetes API by default</li> <li>It should be possible to write to the Kubernetes API for some uses.</li> </ul> <p>The four requirements translate into five separate Roles:</p> <ul> <li>ReadOnly</li> <li>PowerUser</li> <li>Operator</li> <li>Controller</li> <li>Admin</li> </ul> <p>You can read about <a href=https://kubernetes-on-aws.readthedocs.io/en/latest/dev-guide/arch/access-control/adr-004-roles-and-service-accounts.html>their decision in this link</a>.</p> <h2 id=custom-policies><strong>Custom Policies</strong><a class=headerlink href=#custom-policies title="Permanent link">#</a></h2> <p>As an example, you might want to avoid downloading containers from the public internet and prefer to approve those containers first.</p> <p>Perhaps you have an internal registry, and only the images in this registry can be deployed in your cluster.</p> <p><em>How do you enforce that only <strong>trusted containers</strong> can be deployed in the cluster?</em></p> <p>There's no RBAC policy for that.</p> <p>Network policies won't work.</p> <p><em>What should you do?</em></p> <p>You could use the <a href=https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/ >Admission controller</a> to vet resources that are submitted to the cluster.</p> <ul> <li> <h3 id=allow-deploying-containers-only-from-known-registries>Allow deploying containers only from known registries<a class=headerlink href=#allow-deploying-containers-only-from-known-registries title="Permanent link">#</a></h3> </li> </ul> <p>One of the most common custom policies that you might want to consider is to restrict the images that can be deployed in your cluster.</p> <p><a href=https://blog.openpolicyagent.org/securing-the-kubernetes-api-with-open-policy-agent-ce93af0552c3#3c6e>The following tutorial explains how you can use the Open Policy Agent to restrict not approved images</a>.</p> <ul> <li> <h3 id=enforce-uniqueness-in-ingress-hostnames>Enforce uniqueness in Ingress hostnames<a class=headerlink href=#enforce-uniqueness-in-ingress-hostnames title="Permanent link">#</a></h3> <p>When a user creates an Ingress manifest, they can use any hostname in it.</p> <p><code>ingress.yaml</code></p> <div class=highlight><pre><span></span><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
spec:
  rules:
    - host: first.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: service
                port:
                  number: 80
</code></pre></div> <p>However, you might want to prevent users using <strong>the same hostname multiple times</strong> and overriding each other.</p> <p>The official documentation for the Open Policy Agent has <a href=https://www.openpolicyagent.org/docs/latest/kubernetes-tutorial/#4-define-a-policy-and-load-it-into-opa-via-kubernetes>a tutorial on how to check Ingress resources as part of the validation webhook</a>.</p> </li> <li> <h3 id=only-use-approved-domain-names-in-the-ingress-hostnames>Only use approved domain names in the Ingress hostnames<a class=headerlink href=#only-use-approved-domain-names-in-the-ingress-hostnames title="Permanent link">#</a></h3> <p>When a user creates an Ingress manifest, they can use any hostname in it. a</p> <p><code>ingress.yaml</code></p> <div class=highlight><pre><span></span><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
spec:
  rules:
    - host: first.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: service
                port:
                  number: 80
</code></pre></div> </li> </ul> <p>However, you might want to prevent users using <strong>invalid hostnames</strong>.</p> <p>The official documentation for the Open Policy Agent has <a href=https://www.openpolicyagent.org/docs/latest/kubernetes-tutorial/#4-define-a-policy-and-load-it-into-opa-via-kubernetes>a tutorial on how to check Ingress resources as part of the validation webhook</a>.</p> <h2 id=3-cluster-configuration>3. Cluster configuration<a class=headerlink href=#3-cluster-configuration title="Permanent link">#</a></h2> <p>This section is a work in progress. Do you have an opinion on what you should be included? <a href=https://github.com/learnk8s/kubernetes-production-best-practices/issues>File an issue.</a></p> <p>Approved Kubernetes configuration</p> <p>But how do you know what's the recommended configuration for your cluster?</p> <p>The best option is to compare your cluster with a standard reference.</p> <p>In the case of Kubernetes, the reference is the Centre for Internet Security (CIS) benchmark.</p> <ul> <li> <h3 id=the-cluster-passes-the-cis-benchmark>The cluster passes the CIS benchmark<a class=headerlink href=#the-cluster-passes-the-cis-benchmark title="Permanent link">#</a></h3> </li> </ul> <p>The Center for Internet Security provides several guidelines and benchmark tests for best practices in securing your code.</p> <p>They also maintain a benchmark for Kubernetes which you can <a href=https://www.cisecurity.org/benchmark/kubernetes/ >download from the official website</a>.</p> <p>While you can read the lengthy guide and manually check if your cluster is compliant, an easier way is to download and execute <a href=https://github.com/aquasecurity/kube-bench><code>kube-bench</code></a>.</p> <p><a href=https://github.com/aquasecurity/kube-bench><code>kube-bench</code></a> is a tool designed to automate the CIS Kubernetes benchmark and report on misconfigurations in your cluster.</p> <p>Example output:</p> <div class=highlight><pre><span></span><code><span class=o>[</span>INFO<span class=o>]</span><span class=w> </span><span class=m>1</span><span class=w> </span>Master<span class=w> </span>Node<span class=w> </span>Security<span class=w> </span>Configuration
<span class=o>[</span>INFO<span class=o>]</span><span class=w> </span><span class=m>1</span>.1<span class=w> </span>API<span class=w> </span>Server
<span class=o>[</span>WARN<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.1<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--anonymous-auth<span class=w> </span>argument<span class=w> </span>is<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=nb>false</span><span class=w> </span><span class=o>(</span>Not<span class=w> </span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.2<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--basic-auth-file<span class=w> </span>argument<span class=w> </span>is<span class=w> </span>not<span class=w> </span><span class=nb>set</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.3<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--insecure-allow-any-token<span class=w> </span>argument<span class=w> </span>is<span class=w> </span>not<span class=w> </span><span class=nb>set</span><span class=w> </span><span class=o>(</span>Not<span class=w> </span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.4<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--kubelet-https<span class=w> </span>argument<span class=w> </span>is<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=nb>true</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.5<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--insecure-bind-address<span class=w> </span>argument<span class=w> </span>is<span class=w> </span>not<span class=w> </span><span class=nb>set</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.6<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--insecure-port<span class=w> </span>argument<span class=w> </span>is<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=m>0</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
<span class=o>[</span>PASS<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.7<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--secure-port<span class=w> </span>argument<span class=w> </span>is<span class=w> </span>not<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=m>0</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
<span class=o>[</span>FAIL<span class=o>]</span><span class=w> </span><span class=m>1</span>.1.8<span class=w> </span>Ensure<span class=w> </span>that<span class=w> </span>the<span class=w> </span>--profiling<span class=w> </span>argument<span class=w> </span>is<span class=w> </span><span class=nb>set</span><span class=w> </span>to<span class=w> </span><span class=nb>false</span><span class=w> </span><span class=o>(</span>Scored<span class=o>)</span>
</code></pre></div> <blockquote> <p>Please note that it is not possible to inspect the master nodes of managed clusters such as GKE, EKS and AKS, using <code>kube-bench</code>. The master nodes are controlled and managed by the cloud provider.</p> </blockquote> <ul> <li> <h3 id=disable-metadata-cloud-providers-metada-api>Disable metadata cloud providers metada API<a class=headerlink href=#disable-metadata-cloud-providers-metada-api title="Permanent link">#</a></h3> </li> </ul> <p>Cloud platforms (AWS, Azure, GCE, etc.) often expose metadata services locally to instances.</p> <p>By default, these APIs are accessible by pods running on an instance and can contain cloud credentials for that node, or provisioning data such as kubelet credentials.</p> <p>These credentials can be used to escalate within the cluster or to other cloud services under the same account.</p> <ul> <li> <h3 id=restrict-access-to-alpha-or-beta-features>Restrict access to alpha or beta features<a class=headerlink href=#restrict-access-to-alpha-or-beta-features title="Permanent link">#</a></h3> </li> </ul> <p>Alpha and beta Kubernetes features are in active development and may have limitations or bugs that result in security vulnerabilities.</p> <p>Always assess the value an alpha or beta feature may provide against the possible risk to your security posture.</p> <p>When in doubt, disable features you do not use.</p> <p>Kubernetes supports different authentication strategies:</p> <ul> <li><strong>Static Tokens</strong>: are difficult to invalidate and should be avoided</li> <li><strong>Bootstrap Tokens</strong>: same as static tokens above</li> <li><strong>Basic Authentication</strong> transmits credentials over the network in cleartext</li> <li><strong>X509 client certs</strong> requires renewing and redistributing client certs regularly</li> <li><strong>Service Account Tokens</strong> are the preferred authentication strategy for applications and workloads running in the cluster</li> <li><strong>OpenID Connect (OIDC) Tokens</strong>: best authentication strategy for end-users as OIDC integrates with your identity provider such as AD, AWS IAM, GCP IAM, etc.</li> </ul> <p>You can learn about the strategies in more detail <a href=https://kubernetes.io/docs/reference/access-authn-authz/authentication/ >in the official documentation</a>.</p> <ul> <li> <h3 id=use-openid-oidc-tokens-as-a-user-authentication-strategy>Use OpenID (OIDC) tokens as a user authentication strategy<a class=headerlink href=#use-openid-oidc-tokens-as-a-user-authentication-strategy title="Permanent link">#</a></h3> </li> </ul> <p>Kubernetes supports various authentication methods, including OpenID Connect (OIDC).</p> <p>OpenID Connect allows single sign-on (SSO) such as your Google Identity to connect to a Kubernetes cluster and other development tools.</p> <p>You don't need to remember or manage credentials separately.</p> <p>You could have several clusters connect to the same OpenID provider.</p> <p>You can <a href=https://thenewstack.io/kubernetes-single-sign-one-less-identity/ >learn more about the OpenID connect in Kubernetes</a> in this article.</p> <p>Role-Based Access Control (RBAC)</p> <ul> <li> <h3 id=serviceaccount-tokens-are-for-applications-and-controllers-only>ServiceAccount tokens are for applications and controllers <strong>only</strong><a class=headerlink href=#serviceaccount-tokens-are-for-applications-and-controllers-only title="Permanent link">#</a></h3> </li> </ul> <p>Service Account Tokens should not be used for end-users trying to interact with Kubernetes clusters, but they are the preferred authentication strategy for applications and workloads running on Kubernetes.</p> <ul> <li> <h3 id=theres-a-retention-and-archival-strategy-for-logs>There's a retention and archival strategy for logs<a class=headerlink href=#theres-a-retention-and-archival-strategy-for-logs title="Permanent link">#</a></h3> </li> </ul> <p>You should retain 30-45 days of historical logs.</p> <ul> <li> <h3 id=logs-are-collected-from-nodes-control-plane-auditing>Logs are collected from Nodes, Control Plane, Auditing<a class=headerlink href=#logs-are-collected-from-nodes-control-plane-auditing title="Permanent link">#</a></h3> </li> </ul> <p>What to collect logs from:</p> <ul> <li>Nodes (kubelet, container runtime)</li> <li>Control plane (API server, scheduler, controller manager)</li> <li>Kubernetes auditing (all requests to the API server)</li> </ul> <p>What you should collect:</p> <ul> <li>Application name. Retrieved from metadata labels.</li> <li>Application instance. Retrieved from metadata labels.</li> <li>Application version. Retrieved from metadata labels.</li> <li>Cluster ID. Retrieved from Kubernetes cluster.</li> <li>Container name. Retrieved from Kubernetes API.</li> <li>Cluster node running this container. Retrieved from Kubernetes cluster.</li> <li>Pod name running the container. Retrieved from Kubernetes cluster.</li> <li> <p>The namespace. Retrieved from Kubernetes cluster.</p> </li> <li> <h3 id=prefer-a-daemon-on-each-node-to-collect-the-logs-instead-of-sidecars>Prefer a daemon on each node to collect the logs instead of sidecars<a class=headerlink href=#prefer-a-daemon-on-each-node-to-collect-the-logs-instead-of-sidecars title="Permanent link">#</a></h3> </li> </ul> <p>Applications should log to stdout rather than to files.</p> <p>A daemon on each node can collect the logs from the container runtime (if logging to files, a sidecar container for each pod might be necessary).</p> <ul> <li> <h3 id=provision-a-log-aggregation-tool>Provision a log aggregation tool<a class=headerlink href=#provision-a-log-aggregation-tool title="Permanent link">#</a></h3> <p>Use a log aggregation tool such as EFK stack (Elasticsearch, Fluentd, Kibana), DataDog, Sumo Logic, Sysdig, GCP Stackdriver, Azure Monitor, AWS CloudWatch.</p> </li> </ul> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2021 ivanka </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/ivankatliarchuk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://github.com/ivankatliarchuk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://hub.docker.com/r/cloudkats target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://www.hackerrank.com/tanzwud target=_blank rel=noopener title=www.hackerrank.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M477.5 128C463 103.05 285.13 0 256.16 0S49.25 102.79 34.84 128s-14.49 230.8 0 256 192.38 128 221.32 128S463 409.08 477.49 384s14.51-231 .01-256zM316.13 414.22c-4 0-40.91-35.77-38-38.69.87-.87 6.26-1.48 17.55-1.83 0-26.23.59-68.59.94-86.32 0-2-.44-3.43-.44-5.85h-79.93c0 7.1-.46 36.2 1.37 72.88.23 4.54-1.58 6-5.74 5.94-10.13 0-20.27-.11-30.41-.08-4.1 0-5.87-1.53-5.74-6.11.92-33.44 3-84-.15-212.67v-3.17c-9.67-.35-16.38-1-17.26-1.84-2.92-2.92 34.54-38.69 38.49-38.69s41.17 35.78 38.27 38.69c-.87.87-7.9 1.49-16.77 1.84v3.16c-2.42 25.75-2 79.59-2.63 105.39h80.26c0-4.55.39-34.74-1.2-83.64-.1-3.39.95-5.17 4.21-5.2 11.07-.08 22.15-.13 33.23-.06 3.46 0 4.57 1.72 4.5 5.38C333 354.64 336 341.29 336 373.69c8.87.35 16.82 1 17.69 1.84 2.88 2.91-33.62 38.69-37.58 38.69z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.indexes", "search.suggest", "search.highlight", "search.share", "tabs", "tags", "toc.integrate", "toc.follow", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.a51614de.min.js></script> </body> </html>